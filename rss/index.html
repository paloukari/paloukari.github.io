<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[HAVE DATA - WILL TRAIN]]></title><description><![CDATA[The adventures of a Data Scientist who travels the Web working as a mercenary for people who hire him to solve their problems, but he provides his services for free to poor people who need his help]]></description><link>https://havedatawilltrain.com//</link><image><url>https://havedatawilltrain.com//favicon.png</url><title>HAVE DATA - WILL TRAIN</title><link>https://havedatawilltrain.com//</link></image><generator>Ghost 2.31</generator><lastBuildDate>Mon, 30 Sep 2019 20:22:01 GMT</lastBuildDate><atom:link href="https://havedatawilltrain.com//rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[Drama of entropy]]></title><description><![CDATA[Remote Debugging inside a Container running on a Jetson Device]]></description><link>https://havedatawilltrain.com//drama-of-entropy/</link><guid isPermaLink="false">5d8aad58bea92c00581d20fc</guid><category><![CDATA[Jetson Nano]]></category><category><![CDATA[Jetson TX2]]></category><category><![CDATA[Remote Debugging]]></category><category><![CDATA[VSCode]]></category><category><![CDATA[ARM]]></category><category><![CDATA[Docker]]></category><category><![CDATA[Containers]]></category><dc:creator><![CDATA[Spyros Garyfallos]]></dc:creator><pubDate>Mon, 30 Sep 2019 20:17:07 GMT</pubDate><media:content url="https://havedatawilltrain.com//content/images/2019/09/Electrical-poles.jpg" medium="image"/><content:encoded><![CDATA[<img src="https://havedatawilltrain.com//content/images/2019/09/Electrical-poles.jpg" alt="Drama of entropy"><p>I used to mess up my development environment over time by installing all the different experimentation dependencies. There is also I decided to switch to Docker containers.</p><p>The <strong>Jetson Nano </strong>default image comes with Docker runtime pre-installed. To package your app and avoid polluting your device OS with various dependencies, you can use Docker containers as development environments.</p><p>In fact, using a container as a development environment is a very similar to using directly a Jetson device for remote development. Here's my post that describes how to do the latter:</p><!--kg-card-begin: bookmark--><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://havedatawilltrain.com//got-nano-will-code/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Got Nano, Wanna Code</div><div class="kg-bookmark-description">Learn how to setup a remote development environment using VSCode from a Windows machine on a ARM device</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://havedatawilltrain.com//favicon.png" alt="Drama of entropy"><span class="kg-bookmark-author">Spyros Garyfallos</span><span class="kg-bookmark-publisher">HAVE DATA - WILL TRAIN</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://havedatawilltrain.com//content/images/2019/09/Jetson-Nano_3QTR-Front_Left_trimmed-4.jpg" alt="Drama of entropy"></div></a></figure><!--kg-card-end: bookmark--><h3 id="remote-debugging-inside-a-container-running-on-a-jetson-device">Remote Debugging inside a Container running on a Jetson Device</h3><p></p><p>The <strong><a href="https://github.com/NVIDIA/nvidia-docker/wiki/NVIDIA-Container-Runtime-on-Jetson">NVIDIA Container Runtime on Jetson</a> </strong>repo<strong> </strong>has great information on how to use GPU accelerated Â containers in both a Jetson and an X64 workstation.</p><p>Once you choose what's your base container, you'll need to setup a few more things. </p><p>You can either clone <a href="https://github.com/paloukari/jetson-remote-development">this repo</a> that contains all the below code, or start from scratch. The assumed file structure of all the following code is:</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://havedatawilltrain.com//content/images/2019/09/image-5.png" class="kg-image" alt="Drama of entropy"></figure><!--kg-card-end: image--><blockquote><strong>/keys: </strong>Here's where I keep my public ssh key.<br><strong>/.vscode:</strong> Here's where I keep my debugging configuration.<br><strong>/docker: </strong>Inside the <strong>docker </strong>folder, I put the container definition and the start and run scripts.<br><strong>/src: </strong>Inside the <strong>src </strong>folder, I put the application source code.</blockquote><h3 id="-keys">/keys</h3><p>You will need to setup a passwordless ssh between your host's VSCode and the container. To do this, you'll need to copy your ssh public key in the container's <code>authorized_keys</code> file. To get your public ssh key, run:<code>cat ~/.ssh/id_rsa.pub</code>. Copy the key value in the <code>id_rsa.pub</code> key file that's inside the /keys folder.</p><blockquote>My host is a Windows 10 machine and I generally make sure that my Windows and WSL keys are the same. To do this, I've copied my keys from <code>~/.ssh/</code> to <code>/mnt/c/users/[YOUR USERNAME]/.ssh</code>/. This way I get a convenience security symmetry.</blockquote><h3 id="-vscode">/vscode</h3><p>Here's the my <code>launch.json</code> and how to setup an X Server for forwarding any GUI running on the container to your host (<a href="https://havedatawilltrain.com//got-nano-will-code/">here's</a> more information how to set this up)</p><!--kg-card-begin: markdown--><pre><code>{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Python: Current File&quot;,
            &quot;type&quot;: &quot;python&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;program&quot;: &quot;${file}&quot;,
            &quot;console&quot;: &quot;integratedTerminal&quot;, 
            &quot;env&quot;:
            {
            &quot;DISPLAY&quot;: &quot;10.135.62.79:0.0&quot; 
            }
        }
    ]
}
</code></pre>
<!--kg-card-end: markdown--><blockquote>Replace the IP with your host's IP. I'm using the X410 X Server on Windows 10.</blockquote><h3 id="-docker">/docker</h3><p>In this example, I've started from the a bare minimum, the l4t OS. This dockerfile is self explanatory. </p><!--kg-card-begin: markdown--><pre><code>FROM nvcr.io/nvidia/l4t-base:r32.2

ENV DEBIAN_FRONTEND=noninteractive

# Install Python3, Git and OpenCV
RUN apt-get update &amp;&amp; apt-get --yes install openssh-server python3-dev python3-pip python3-opencv git
RUN pip3 install --upgrade pip

# Install the code requirements
COPY ./src/requirements.txt /tmp/requirements.txt
RUN pip3 install -r /tmp/requirements.txt

# Install the ssh public key
COPY ./keys/id_rsa.pub /tmp/tmp.pub
RUN mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat /tmp/tmp.pub &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys &amp;&amp; rm -f /tmp/tmp.pub

# Install VSCode
RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 0CC3FD642696BFC8
RUN wget -O /tmp/apt.sh https://code.headmelted.com/installers/apt.sh
RUN chmod +x /tmp/apt.sh
RUN /tmp/apt.sh

# Set the WORKDIR
WORKDIR /src

# Restart ssh service
ENTRYPOINT service ssh restart &amp;&amp; bash
</code></pre>
<!--kg-card-end: markdown--><h3 id="-src">/src</h3><p>This is where I put all the application code. You can test that the X forwarding works by opening running the <code>x-forwarding.py</code>. You'll have to install the <code>eog</code> application in the container first by running <code>apt-get install eog</code> in a new VSCode terminal.</p><p>Here's the <code>x-forwarding.py</code> code:</p><!--kg-card-begin: markdown--><pre><code>import subprocess
subprocess.run([&quot;eog&quot;])
</code></pre>
<!--kg-card-end: markdown--><h2 id="wiring-everything-up">Wiring everything up</h2><h3 id="on-your-jetson-device-run-">On your Jetson device, run:</h3><!--kg-card-begin: markdown--><pre><code># Clone the example repo
git clone https://github.com/paloukari/jetson-remote-development
cd jetson-remote-development

# Build the dev container
docker build . -f ./docker/Dockerfile.python3.dev -t dev-python3

# Run the container
docker run --rm --runtime nvidia -ti -e DISPLAY=$DISPLAY -v &quot;$PWD&quot;:/src -p 32001:22 dev-python3
</code></pre>
<!--kg-card-end: markdown--><p>In your host's VSCode, add this information in the Remote-SSH configuration file:</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://havedatawilltrain.com//content/images/2019/09/image-6.png" class="kg-image" alt="Drama of entropy"></figure><!--kg-card-end: image--><!--kg-card-begin: markdown--><pre><code>Host Nano
    User spyros
    HostName spyros-nano2
    IdentityFile ~/.ssh/id_rsa

Host NanoContainer
    User root
    HostName spyros-nano2
    IdentityFile ~/.ssh/id_rsa
    Port 32001

</code></pre>
<!--kg-card-end: markdown--><p>Now, you should be able to connect to the NanoContainer Remote SSH host. Last step is to install the Python VSCode extension on the remote host and to update the <code>launch.json</code> file with your host's IP. </p><!--kg-card-begin: image--><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://havedatawilltrain.com//content/images/2019/09/image-8.png" class="kg-image" alt="Drama of entropy"><figcaption>The VSCode extensions need to be installed in both machines in a Remote-SSH session</figcaption></figure><!--kg-card-end: image--><p><strong>What we have achieved: </strong><u>We can now do remote development from a Windows host to container running on a Jetson Nano, using VSCode.</u></p>]]></content:encoded></item><item><title><![CDATA[Got Nano, Wanna Code]]></title><description><![CDATA[Learn how to setup a remote development environment using VSCode from a Windows machine on a ARM device]]></description><link>https://havedatawilltrain.com//got-nano-will-code/</link><guid isPermaLink="false">5d7bf22d3694ea005ad2a5f8</guid><category><![CDATA[Jetson Nano]]></category><category><![CDATA[Remote Debugging]]></category><category><![CDATA[VSCode]]></category><category><![CDATA[ARM]]></category><dc:creator><![CDATA[Spyros Garyfallos]]></dc:creator><pubDate>Wed, 25 Sep 2019 20:39:41 GMT</pubDate><media:content url="https://havedatawilltrain.com//content/images/2019/09/Jetson-Nano_3QTR-Front_Left_trimmed-1.jpg" medium="image"/><content:encoded><![CDATA[<img src="https://havedatawilltrain.com//content/images/2019/09/Jetson-Nano_3QTR-Front_Left_trimmed-1.jpg" alt="Got Nano, Wanna Code"><p>So, you just got your Jetson Nano and you're wondering how to get started? In this blog post you'll learn how to setup a remote development environment from your Windows 10 machine to a Jetson device.</p><h2 id="device-setup">Device Setup</h2><p>First, let's start with the device initial setup. To prepare my device, I followed the official <a href="https://developer.nvidia.com/embedded/learn/get-started-jetson-nano-devkit#intro">getting started guide </a>from Nvidia. I used a <a href="https://www.amazon.com/SanDisk-128GB-Extreme-microSD-Adapter/dp/B07FCMKK5X/ref=asc_df_B07FCMKK5X/?tag=hyprod-20&amp;linkCode=df0&amp;hvadid=309776868400&amp;hvpos=1o1&amp;hvnetw=g&amp;hvrand=8725959158767136122&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=1027744&amp;hvtargid=pla-588455240877&amp;psc=1">128 GB microSD</a> and a <a href="https://www.amazon.com/5V-4000mA-switching-power-supply/dp/B01LY5TG5Y">power adapter</a> to power up my device, along with the <a href="https://www.jetsonhacks.com/2019/04/10/jetson-nano-use-more-power/">required jumper</a>. I connected a Dell P2415Q monitor using an HDMI cable and my USB receiver for my Logitech Triathlon keyboard and mouse. My development laptop is a Windows 10 machine.</p><h2 id="desktop-sharing">Desktop Sharing </h2><p>The desktop sharing app is broken. Follow <a href="https://blog.hackster.io/getting-started-with-the-nvidia-jetson-nano-developer-kit-43aa7c298797">this</a> article to fix it. You can also find instructions there on how to use Microsoft's Remote Desktop.</p><h2 id="development-environment">Development Environment</h2><p>The latest trend in the development experience in the software development industry is do your development using <strong>CLIs </strong>and <strong>code editors</strong>. I generally enjoy having all moving parts together, or at least in proximity when I'm coding.</p><p><strong>Visual Studio Code</strong> succeeded in combining together a cross-platform code editor, community driven plugins and decent UI/UX for development. But what I really like with Visual Studio Code is the recent <strong><a href="https://code.visualstudio.com/docs/remote/remote-overview">Remote Development</a> </strong>capability that allows you to keep a local UI/UX experience, while working on a remote host or container.</p><p>The other thing I like having in my development environment is <strong>idempotency</strong>: not having to deal with the dependencies of the host. <strong>Containers </strong>allow me to have multiple dependency configurations on the same host, and moreover, to share code between different hosts. For this reason, in every code sample I present in this blog, I make sure to include the corresponding container.</p><h3 id="step-1-remote-development-on-a-jetson-nano">Step 1: Remote Development on a Jetson Nano</h3><p>Because the ARM64 architecture is not officially supported yet, to install<strong> Visual Studio Code</strong> on your <strong>Jetson Nano</strong>, for now you'll have to use the <a href="https://code.headmelted.com/">community binaries</a>.</p><p><strong>Installing Visual Studio Code on a Jetson Nano</strong></p><!--kg-card-begin: code--><pre><code class="language-Bash"># Start an elevated session
sudo -s

# Install the community repo key
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 0CC3FD642696BFC8

# Run the installation script
. &lt;( wget -O - https://code.headmelted.com/installers/apt.sh )
</code></pre><!--kg-card-end: code--><p>If all goes well, you should get this output:</p><!--kg-card-begin: code--><pre><code class="language-Bash">Installation complete!

You can start code at any time by calling "code-oss" within a terminal.

A shortcut should also now be available in your desktop menus (depending on your distribution).</code></pre><!--kg-card-end: code--><p>Next, you'll need to install the <strong><a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a> on your host </strong>and install the <strong><a href="https://code.visualstudio.com/docs/remote/remote-overview">Remote Development</a> </strong>extension.</p><p>As a final step, you'll need to setup a passwordless SSH between your host and the Nano. To do this, you'll need to create an SSH public-private key pair and configure your Nano to trust your public key.</p><p>To setup your local SSH key in Windows run:</p><!--kg-card-begin: code--><pre><code class="language-Powershell">Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
ssh-keygen -t rsa -b 4096 
</code></pre><!--kg-card-end: code--><p>The keys will be created here: %USERPROFILE%\.ssh</p><p>To copy to the Nano your public key:</p><!--kg-card-begin: code--><pre><code class="language-CMD">SET REMOTEHOST=user@device
scp %USERPROFILE%\.ssh\id_rsa.pub %REMOTEHOST%:~/tmp.pub
ssh %REMOTEHOST% "mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh &amp;&amp; cat ~/tmp.pub &gt;&gt; ~/.ssh/authorized_keys &amp;&amp; chmod 600 ~/.ssh/authorized_keys &amp;&amp; rm -f ~/tmp.pub"</code></pre><!--kg-card-end: code--><!--kg-card-begin: markdown--><blockquote>
<p>You'll need to replace the value <strong>user@device</strong></p>
</blockquote>
<!--kg-card-end: markdown--><p>In you host VSCode, hit F1 and type <em>Remote-SSH: Open Configuration File..</em></p><p>Add your configuration:</p><!--kg-card-begin: code--><pre><code class="language-Remote-SSH config">Host Nano
    User user
    HostName device
    IdentityFile ~/.ssh/id_rsa</code></pre><!--kg-card-end: code--><!--kg-card-begin: markdown--><blockquote>
<p>Replace the values <strong>user</strong> and <strong>device</strong></p>
</blockquote>
<!--kg-card-end: markdown--><p>Connect to your Nano clicking the low left corner green icon:</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://havedatawilltrain.com//content/images/2019/09/image-1.png" class="kg-image" alt="Got Nano, Wanna Code"></figure><!--kg-card-end: image--><p>Congrats! Once connected, you can open a remote folder and open remote terminals directly in VSCode.</p><h3 id="step-2-x-forwarding">Step 2: X forwarding</h3><p>What about applications that have a GUI? No worries, you can setup an X forwarding from Nano to your host. To do this, I'm using the <a href="https://token2shell.com/x410/"><strong>X410 server</strong></a> for Windows. After installing and running the server, make sure you allow public access.</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://havedatawilltrain.com//content/images/2019/09/image-2.png" class="kg-image" alt="Got Nano, Wanna Code"></figure><!--kg-card-end: image--><p>All is left to do is to configure the X Forwarding on your Nano device.</p><p>Open a terminal in VSCode (<strong>Ctrl+Shift+`</strong> on Windows) and run:</p><!--kg-card-begin: code--><pre><code class="language-Remote-SSH config">export DISPLAY=10.135.62.79:0.0</code></pre><!--kg-card-end: code--><!--kg-card-begin: markdown--><blockquote>
<p>Make sure you replace the above IP with your host IP</p>
</blockquote>
<!--kg-card-end: markdown--><p> To verify everything works, from the terminal run:</p><!--kg-card-begin: code--><pre><code class="language-Remote-SSH config">eog</code></pre><!--kg-card-end: code--><p>If all goes well, you should see this window:</p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://havedatawilltrain.com//content/images/2019/09/image-3.png" class="kg-image" alt="Got Nano, Wanna Code"></figure><!--kg-card-end: image--><p>To automatically set the remote variable when debugging your app, you can modify your<strong> launch.json </strong>and set the variable there:</p><!--kg-card-begin: code--><pre><code class="language-launch.json">{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal", 
            "env":
            {
            "DISPLAY": "10.135.62.79:0.0" 
            }
        }
    ]
}</code></pre><!--kg-card-end: code--><p>To test all this, create a new python file containing the following code:</p><!--kg-card-begin: code--><pre><code class="language-test.py">import subprocess
subprocess.run(["eog"])</code></pre><!--kg-card-end: code--><p>Now you can hit <strong>F5 </strong>and you'll get the same development experience, as with your local host, but<strong> running on a remote ARM machine!</strong></p><p><strong>What we have achieved: </strong><u>We can now do remote development from a Windows host to a Jetson Nano, using VSCode.</u></p><!--kg-card-begin: image--><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://havedatawilltrain.com//content/images/2019/09/ezgif-5-44d36401c343.gif" class="kg-image" alt="Got Nano, Wanna Code"><figcaption>Starting a remote debugging session on Jetson Nano</figcaption></figure><!--kg-card-end: image--><p>Next, we'll setup the same remote environment, but on a Docker container running on the Jetson device.</p><!--kg-card-begin: bookmark--><figure class="kg-card kg-bookmark-card"><a class="kg-bookmark-container" href="https://havedatawilltrain.com//drama-of-entropy/"><div class="kg-bookmark-content"><div class="kg-bookmark-title">Drama of entropy</div><div class="kg-bookmark-description">Remote Debugging inside a Container running on a Jetson Device</div><div class="kg-bookmark-metadata"><img class="kg-bookmark-icon" src="https://havedatawilltrain.com//favicon.png" alt="Got Nano, Wanna Code"><span class="kg-bookmark-author">Spyros Garyfallos</span><span class="kg-bookmark-publisher">HAVE DATA - WILL TRAIN</span></div></div><div class="kg-bookmark-thumbnail"><img src="https://havedatawilltrain.com//content/images/2019/09/Electrical-poles-2.jpg" alt="Got Nano, Wanna Code"></div></a></figure><!--kg-card-end: bookmark-->]]></content:encoded></item></channel></rss>