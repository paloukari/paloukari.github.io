<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>The beloved man&#x27;s objection</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=2257888ceb" />

    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://havedatawilltrain.com/the-beloved-mans-objection/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://havedatawilltrain.com/the-beloved-mans-objection/amp/" />
    
    <meta property="og:site_name" content="HAVE DATA - WILL TRAIN" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="The beloved man&#x27;s objection" />
    <meta property="og:description" content="This is the tenth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of Unit Testing in Azure IoT Edge." />
    <meta property="og:url" content="https://havedatawilltrain.com/the-beloved-mans-objection/" />
    <meta property="og:image" content="https://havedatawilltrain.com/content/images/2020/04/invertebrate.jpg" />
    <meta property="article:published_time" content="2020-04-28T23:31:01.000Z" />
    <meta property="article:modified_time" content="2020-04-28T23:48:40.000Z" />
    <meta property="article:tag" content="Azure IoT Edge" />
    
    <meta property="article:publisher" content="https://www.facebook.com/spyros.garyfallos" />
    <meta property="article:author" content="https://www.facebook.com/spyros.garyfallos" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The beloved man&#x27;s objection" />
    <meta name="twitter:description" content="This is the tenth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of Unit Testing in Azure IoT Edge." />
    <meta name="twitter:url" content="https://havedatawilltrain.com/the-beloved-mans-objection/" />
    <meta name="twitter:image" content="https://havedatawilltrain.com/content/images/2020/04/invertebrate.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Spyros Garyfallos" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Azure IoT Edge" />
    <meta name="twitter:site" content="@SpyrosCarnation" />
    <meta name="twitter:creator" content="@SpyrosCarnation" />
    <meta property="og:image:width" content="630" />
    <meta property="og:image:height" content="420" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "HAVE DATA - WILL TRAIN",
        "url": "https://havedatawilltrain.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://havedatawilltrain.com/content/images/2019/07/Logo2.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Spyros Garyfallos",
        "image": {
            "@type": "ImageObject",
            "url": "https://havedatawilltrain.com/content/images/2019/09/Capture.PNG",
            "width": 375,
            "height": 439
        },
        "url": "https://havedatawilltrain.com/author/spyros/",
        "sameAs": [
            "https://www.facebook.com/spyros.garyfallos",
            "https://twitter.com/SpyrosCarnation"
        ]
    },
    "headline": "The beloved man&#x27;s objection",
    "url": "https://havedatawilltrain.com/the-beloved-mans-objection/",
    "datePublished": "2020-04-28T23:31:01.000Z",
    "dateModified": "2020-04-28T23:48:40.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://havedatawilltrain.com/content/images/2020/04/invertebrate.jpg",
        "width": 630,
        "height": 420
    },
    "keywords": "Azure IoT Edge",
    "description": "This is the tenth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of Unit Testing in Azure IoT Edge.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://havedatawilltrain.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.12" />
    <link rel="alternate" type="application/rss+xml" title="HAVE DATA - WILL TRAIN" href="https://havedatawilltrain.com/rss/" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-148729349-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148729349-1');
</script>

<!-- link tag -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css" />

<style> pre[class*="language-"] { font-size: 0.75em; } </style>

</head>
<body class="post-template tag-azure-iot-edge">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="https://havedatawilltrain.com"><img src="/content/images/2019/07/Logo2.png" alt="HAVE DATA - WILL TRAIN" /></a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="https://havedatawilltrain.com/">Home</a></li>
    <li class="nav-author" role="menuitem"><a href="https://havedatawilltrain.com/author/spyros/">Author</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.linkedin.com/in/spirosgarifallos/" title="Linkedin" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="26" height="26"
viewBox="0 0 192 192"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#ffffff"><g id="surface1"><path d="M156,0h-120c-19.875,0 -36,16.125 -36,36v120c0,19.875 16.125,36 36,36h120c19.875,0 36,-16.125 36,-36v-120c0,-19.875 -16.125,-36 -36,-36zM59.36539,162.98077h-29.82693l-0.17307,-89.30769h29.82692zM43.70192,61.99038h-0.17308c-9.75,0 -16.03846,-6.72115 -16.03846,-15.08653c0,-8.56731 6.49039,-15.0577 16.41347,-15.0577c9.92308,0 16.00961,6.49038 16.21153,15.0577c0,8.36538 -6.31731,15.08653 -16.41346,15.08653zM162.77885,162.98077h-30.08654v-48.51923c0,-11.74039 -3.11538,-19.73077 -13.61538,-19.73077c-8.01923,0 -12.34615,5.39423 -14.42308,10.61538c-0.77885,1.875 -0.98077,4.44231 -0.98077,7.06731v50.56731h-30.23077l-0.17308,-89.30769h30.23077l0.17308,12.60577c3.86538,-5.97116 10.29808,-14.42308 25.70192,-14.42308c19.09616,0 33.37501,12.46154 33.37501,39.25961v51.86539z"></path></g></g></g></svg></a>
                <a class="social-link social-link-tw" href="https://twitter.com/SpyrosCarnation" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/https://havedatawilltrain.com/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-azure-iot-edge ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2020-04-28">28 April 2020</time>
                        <span class="date-divider">/</span> <a href="/tag/azure-iot-edge/">Azure IoT Edge</a>
                </section>
                <h1 class="post-full-title">The beloved man&#x27;s objection</h1>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="/content/images/size/w300/2020/04/invertebrate.jpg 300w,
                            /content/images/size/w600/2020/04/invertebrate.jpg 600w,
                            /content/images/size/w1000/2020/04/invertebrate.jpg 1000w,
                            /content/images/size/w2000/2020/04/invertebrate.jpg 2000w"
                    sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px"
                    src="/content/images/size/w2000/2020/04/invertebrate.jpg"
                    alt="The beloved man&#x27;s objection"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>In this mini-series we have analyzed different challenges around the IoT Edge development, and explored a few best practices that will help us avoid any unnecessary roughness when developing Edge applications. In the last post we saw how we can use most of these best practices to compose a loosely coupled Azure IoT Edge application and some tooling that allow us to have a true F5 development experience. Today we will see the main driver for all these patterns, which is <strong>unit testing</strong>.</p><p>The main challenge will any modern application is finding ways to test most of it's code, and then automating that. This automated testing capability can be perceived as the holy grail of every production system, because it greatly accelerates the <strong>software development life cycle </strong>iterations and eventually increases the overall product quality.</p><p>The challenge with Azure IoT Edge development is that the security and communication protocols are tightly coupled to the IoT C# SDK, making it very difficult to run a test without the corresponding infrastructure. Nevertheless, as we saw in <a href="/the-man-who-wouldnt-test/">this post</a>, there is an easy way to abstract this SDK dependency and run the business code using a <strong>mock implementation </strong>of the SDK. We will use the same approach to mock all other dependencies, and eventually test a stand alone business method, a <strong>unit</strong> <strong>test.</strong></p><h3 id="unit-testing-setup">Unit Testing Setup</h3><p>We will be using the <strong>xunit </strong>unit testing framework, a very popular option in .NET Core. We will build two projects from scratch, one <strong>IoT Edge module project </strong>similar to <a href="https://github.com/paloukari/SimulatedTemperatureSensor">this</a> template, and an <strong>xunit unit testing project </strong>that references the former.</p><ol><li>Create the solution and project folders</li></ol><pre><code class="language-bash">mkdir UnitTestingExample
cd UnitTestingExample

mkdir IoTModule
mkdir IoTModuleTests</code></pre><p>2. Create the IoT Edge Module project and add the required nugets </p><pre><code class="language-bash">cd IoTModule
dotnet new console
dotnet add package Microsoft.Azure.Devices.Client
dotnet add package Microsoft.Extensions.Hosting
dotnet add package Serilog.Extensions.Hosting
dotnet add package Serilog.Settings.Configuration
dotnet add package Serilog.Sinks.Console
dotnet add package Serilog.Enrichers.Thread</code></pre><p>4. Add the module code. We will replace the Program.cs code with:</p><pre><code class="language-c#">namespace IoTModule
{
    using System.Threading.Tasks;
    using Microsoft.Extensions.DependencyInjection;
    using Microsoft.Extensions.Hosting;
    using Serilog;

    class Program
    {
        static async Task Main(string[] args)
        {
            using (var host = Host.CreateDefaultBuilder(args)
                 .ConfigureServices((hostContext, services) =&gt;
                 {
                    services.AddSingleton&lt;IModuleClient, ModuleClientWrapper&gt;();
                    services.AddHostedService&lt;EventHandlerModule&gt;();
                 })
                 .UseSerilog()
                 .UseConsoleLifetime()
                 .Build())
            {
                await host.RunAsync();
            }
        }
    }
}
</code></pre><p>5. This code references the <code>IModuleClient</code>  the <code>ModuleClientWrapper</code> and the module class, the <code>EventHandlerModule</code>. We have seen before the first two, they are useful to create an abstraction layer over the SDK and can be found in <a href="/genesis/">this</a> post. </p><p>6. The <code>EventHandlerModule.cs</code> code is this:</p><pre><code class="language-C#">namespace IoTModule
{
    using Microsoft.Azure.Devices.Client;
    using Microsoft.Extensions.Hosting;
    using Microsoft.Extensions.Logging;
    using System.Text;
    using System.Threading;
    using System.Threading.Tasks;

    public class EventHandlerModule : IHostedService
    {
        readonly IModuleClient moduleClient;
        readonly ILogger logger;

        public EventHandlerModule(IModuleClient moduleClient,
            ILogger&lt;EventHandlerModule&gt; logger)
        {
            this.moduleClient = moduleClient;
            this.logger = logger;
        }

        public async Task StartAsync(CancellationToken cancellationToken)
        {
            await moduleClient.OpenAsync(cancellationToken);

            await moduleClient.SetInputMessageHandlerAsync("input",
                new MessageHandler(async (message, context) =&gt;
                {
                    var messageText = Encoding.UTF8.GetString(message.GetBytes());
                    logger.LogInformation($"Message received: {messageText}");
                    return await Task.FromResult(MessageResponse.Completed);
                }), this);

            logger.LogInformation("Started.");
        }

        public async Task StopAsync(CancellationToken cancellationToken)
        {
            await moduleClient.CloseAsync(cancellationToken);
            logger.LogInformation("Stopped.");
        }
    }
}</code></pre><p>This module is fairly simple, it just expects messages in the input called <code>input</code> and logs the message content as string. When we try to run this application, we get an exception from the IoT SDK complaining about missing environment variable, required to connect to the edge daemon:</p><p><code>Environment variable IOTEDGE_WORKLOADURI is required.</code></p><p>It is clear that to test this message handler callback, we need to mock out the SDK.</p><h3 id="unit-test-project">Unit test project</h3><p>Let's setup our unit testing project now. We'll add the <code>Moq</code> nuget too:</p><pre><code class="language-bash">cd ..
cd IoTModuleTests
dotnet new xunit
dotnet add package Moq
dotnet add reference ..\IoTModule</code></pre><p>Let's replace the default test code with this empty test:</p><pre><code class="language-C#">namespace ModuleTests
{
    using Microsoft.Extensions.DependencyInjection;
    using Microsoft.Extensions.Hosting;
    using Xunit;
    using SimulatedTemperatureSensor;
    using Moq;
    using System.Threading;
    using Microsoft.Extensions.Logging;
    using Microsoft.Azure.Devices.Client;
    using System.Text;
    using System.Collections.Generic;
    using System.Threading.Tasks;

    public class EventHandlerModuleTester
    {
        [Fact]
        public async Task TestInputMessageHandler()
        {
            Assert.True(true);
        }
    }
}</code></pre><blockquote>This is a good moment to verify your code, you should be able to run this test successfully. Simply run <code>dotnet test</code></blockquote><p> This will be our first unit test that sends a message to the <code>input</code> input and expects a successful execution of the callback.  	</p><h3 id="mocking-the-iot-sdk">Mocking the IoT SDK</h3><p>Our test needs to setup a similar dependency injection mechanism and add in this mechanism all involved services, except for the <code>ModuleClientWrapper</code> which we will be mocking.</p><p>The test with <strong>just the dependency injection mechanism </strong>becomes:</p><pre><code class="language-C#">[Fact]
public void TestInputMessageHandler()
{
    var services = new ServiceCollection();

    services.AddHostedService&lt;EventHandlerModule&gt;();

    var serviceProvider = services.BuildServiceProvider();
    var hostedService = serviceProvider.GetService&lt;IHostedService&gt;();
    hostedService.StartAsync(new CancellationToken());
}</code></pre><p>This code will try to create and our module, the <code>EventHandlerModule</code> hosted service class. Looking at this class constructor we can see that this service depends on two other services, the <code>IModuleClient</code> and the <code>ILogger&lt;EventHandlerModule&gt;</code> services.</p><p>Lets add a mock version of them:</p><pre><code class="language-C#">[Fact]
public async Task TestInputMessageHandler()
{
    var services = new ServiceCollection();

    services.AddHostedService&lt;EventHandlerModule&gt;();
    services.AddSingleton((s) =&gt;
    {
        var moduleClient = new Mock&lt;IModuleClient&gt;();
        return moduleClient.Object;
    });

    services.AddSingleton((s) =&gt;
    {
        var mockLogger = new Mock&lt;ILogger&lt;EventHandlerModule&gt;&gt;();
        return mockLogger.Object;
    });

    var serviceProvider = services.BuildServiceProvider();

    var hostedService = serviceProvider.GetService&lt;IHostedService&gt;();
    await hostedService.StartAsync(new CancellationToken());
}</code></pre><p>Now this test is complete, in terms having a valid dependency hierarchy in place. In fact, running this test will yield a successful result. We are still missing two last tasks, to inject a message to the module's input and validate a successful callback execution. In other words, we will override the <code>IModuleClient</code>'s  <code>SendEventAsync</code>  and <code>SetInputMessageHandlerAsync</code> methods to send a message to the registered callback. To do this, we will use a <code>Dictionary&lt;string, (MessageHandler, object)&gt;</code> structure to keep the callback in memory and invoke it when we get a message:</p><pre><code class="language-C#">[Fact]
public void _TestInputMessageHandler()
{
    var inputMessageHandlers = new Dictionary&lt;string, (MessageHandler, object)&gt;();

    var services = new ServiceCollection();

    services.AddHostedService&lt;EventHandlerModule&gt;();
    services.AddSingleton((s) =&gt;
    {
        var moduleClient = new Mock&lt;IModuleClient&gt;();

        moduleClient.Setup(e =&gt; e.SetInputMessageHandlerAsync(
            It.IsAny&lt;string&gt;(),
            It.IsAny&lt;MessageHandler&gt;(),
            It.IsAny&lt;object&gt;()))
        .Callback&lt;string, MessageHandler, object&gt;((inputName, messageHandler, userContext) =&gt;
        {
            inputMessageHandlers[inputName] = (messageHandler, userContext);
        }).Returns(Task.FromResult(0));

        moduleClient.Setup(e =&gt; e.SendEventAsync(
            It.IsAny&lt;string&gt;(),
            It.IsAny&lt;Message&gt;()))
        .Callback&lt;string, Message&gt;((output, message) =&gt;
        {
            var result = inputMessageHandlers[output].Item1(message,
                        inputMessageHandlers[output].Item2).GetAwaiter().GetResult();

            Assert.Equal(MessageResponse.Completed, result);

        }).Returns(Task.FromResult(0));

        return moduleClient.Object;
    });

    services.AddSingleton((s) =&gt;
    {
        var mockLogger = new Mock&lt;ILogger&lt;EventHandlerModule&gt;&gt;();
        return mockLogger.Object;
    });

    var serviceProvider = services.BuildServiceProvider();

    var hostedService = serviceProvider.GetService&lt;IHostedService&gt;();
    hostedService.StartAsync(new CancellationToken()).GetAwaiter().GetResult();

    serviceProvider.GetService&lt;IModuleClient&gt;()
        .SendEventAsync("input",
            new Message(Encoding.UTF8.GetBytes("This is a mocked message!"))).GetAwaiter().GetResult();
} </code></pre><p>By calling the <code>Assert.Equal(MessageResponse.Completed, result);</code> inside the <code>SendEventAsync</code> mock , our unit test validates that the callback executed successfully.</p><p>Although this test initially might seem too complicated for such a simple callback, most of this code is common to any other unit test we might implement, and it can be hidden in a dependency initialization step, shared across all other tests for the same module. Indeed, this common initialization step could be moved in this <code>Init</code> method:</p><pre><code class="language-C#">public async Task&lt;ServiceProvider&gt; Init(Action&lt;MessageResponse&gt; messageResultCallback)
{
    var inputMessageHandlers = new Dictionary&lt;string, (MessageHandler, object)&gt;();

    var services = new ServiceCollection();

    services.AddHostedService&lt;EventHandlerModule&gt;();
    services.AddSingleton((s) =&gt;
    {
        var moduleClient = new Mock&lt;IModuleClient&gt;();

        moduleClient.Setup(e =&gt; e.SetInputMessageHandlerAsync(
            It.IsAny&lt;string&gt;(),
            It.IsAny&lt;MessageHandler&gt;(),
            It.IsAny&lt;object&gt;()))
        .Callback&lt;string, MessageHandler, object&gt;((inputName, messageHandler, userContext) =&gt;
        {
            inputMessageHandlers[inputName] = (messageHandler, userContext);
        }).Returns(Task.FromResult(0));

        moduleClient.Setup(e =&gt; e.SendEventAsync(
            It.IsAny&lt;string&gt;(),
            It.IsAny&lt;Message&gt;()))
        .Callback&lt;string, Message&gt;((output, message) =&gt;
        {
            var result = inputMessageHandlers[output].Item1(message,
                        inputMessageHandlers[output].Item2).GetAwaiter().GetResult();

            messageResultCallback(result);

        }).Returns(Task.FromResult(0));

        return moduleClient.Object;
    });

    services.AddSingleton((s) =&gt;
    {
        var mockLogger = new Mock&lt;ILogger&lt;EventHandlerModule&gt;&gt;();
        return mockLogger.Object;
    });

    var serviceProvider = services.BuildServiceProvider();

    var hostedService = serviceProvider.GetService&lt;IHostedService&gt;();
    await hostedService.StartAsync(new CancellationToken());
    return serviceProvider;
}</code></pre><p>and in this case, our message handler unit test code becomes:</p><pre><code class="language-C#">[Fact]
public async Task TestInputMessageHandler()
{
    var serviceProvider = await Init((e) =&gt;
        Assert.Equal(MessageResponse.Completed, e));

    await serviceProvider.GetService&lt;IModuleClient&gt;()
        .SendEventAsync("input",
            new Message(Encoding.UTF8.GetBytes("This is a mocked message!")));
}</code></pre><blockquote>The code of this example has been published <a href="https://github.com/paloukari/AzureIoTEdgeUnitTesting">here</a>.</blockquote><h3 id="recap">Recap</h3><p>We saw how we can use the default .NET Core unit testing frameworks to <strong>build unit tests for our IoT Edge application</strong>. Following this approach we can define any other type of IoT Edge unit test, like twin update, direct method calls etc.  </p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="/content/images/size/w100/2019/09/Capture.PNG" alt="Spyros Garyfallos" />
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="/author/spyros/">Spyros Garyfallos</a></h4>
            <p>Read <a href="/author/spyros/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="/author/spyros/">Read More</a>
</div>


            </footer>

            
            <section class="post-full-comments">
                <div id="disqus_thread"></div>
                <script>
                    var disqus_config = function () {
                        this.page.url = "https://havedatawilltrain.com/the-beloved-mans-objection/";  
                        this.page.identifier = "ghost-5ea6efe24dd4b80082b58ac5"
                    };
                    (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'https://have-data-will-train.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                </script>
            </section>
            

        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"
                            style="background-image: url(/content/images/size/w600/2019/07/blog-cover2.jpg)"
                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; HAVE DATA - WILL TRAIN &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/azure-iot-edge/">Azure IoT Edge</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/lysis/">Lysis</a></li>
                            <li><a href="/genesis/">Genesis</a></li>
                            <li><a href="/the-man-who-wouldnt-test/">The Man Who Wouldn&#x27;t Test</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/azure-iot-edge/">See all 9 posts →</a>
                    </footer>
                </article>


                <article class="post-card post tag-azure-iot-edge ">

    <a class="post-card-image-link" href="/lysis/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2020/04/bike-no-hands.jpg 300w,
                    /content/images/size/w600/2020/04/bike-no-hands.jpg 600w,
                    /content/images/size/w1000/2020/04/bike-no-hands.jpg 1000w,
                    /content/images/size/w2000/2020/04/bike-no-hands.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2020/04/bike-no-hands.jpg"
            alt="Lysis"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/lysis/">

            <header class="post-card-header">
                    <span class="post-card-tags">Azure IoT Edge</span>
                <h2 class="post-card-title">Lysis</h2>
            </header>

            <section class="post-card-excerpt">
                <p>This is the ninth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the development experience with a custom emulated IoT Edge Runtime.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Spyros Garyfallos
                    </div>

                        <a href="/author/spyros/" class="static-avatar">
                            <img class="author-profile-image" src="/content/images/size/w100/2019/09/Capture.PNG" alt="Spyros Garyfallos" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">7 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://havedatawilltrain.com">
                <img src="/content/images/size/w30/2019/07/icon.png" alt="HAVE DATA - WILL TRAIN icon" />
            <span>HAVE DATA - WILL TRAIN</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">The beloved man&#x27;s objection</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=The%20beloved%20man's%20objection&amp;url=https://havedatawilltrain.com/the-beloved-mans-objection/"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://havedatawilltrain.com/the-beloved-mans-objection/"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://havedatawilltrain.com">HAVE DATA - WILL TRAIN</a> &copy; 2020</section>
                <nav class="site-footer-nav">
                    <a href="https://havedatawilltrain.com">Latest Posts</a>
                    <a href="https://www.linkedin.com/in/spirosgarifallos/" target="_blank" rel="noopener">LinkedIn</a>
                    <a href="https://twitter.com/SpyrosCarnation" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/built/jquery.fitvids.js?v=2257888ceb"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    <!-- script tag -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-csharp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-python.min.js"></script>

</body>
</html>
