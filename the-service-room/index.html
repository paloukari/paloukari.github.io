<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>The Service Room</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=9e8ba95cb2" />

    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="http://localhost:2368/the-service-room/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="http://localhost:2368/the-service-room/amp/" />
    
    <meta property="og:site_name" content="HAVE DATA - WILL TRAIN" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="The Service Room" />
    <meta property="og:description" content="This is the fourth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the application configuration." />
    <meta property="og:url" content="http://localhost:2368/the-service-room/" />
    <meta property="og:image" content="http://localhost:2368/content/images/2020/04/willys-jeep-dashboard-marco-oliveira.jpg" />
    <meta property="article:published_time" content="2020-04-10T18:38:20.000Z" />
    <meta property="article:modified_time" content="2020-04-14T17:57:40.000Z" />
    <meta property="article:tag" content="Azure IoT Edge" />
    
    <meta property="article:publisher" content="https://www.facebook.com/spyros.garyfallos" />
    <meta property="article:author" content="https://www.facebook.com/spyros.garyfallos" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="The Service Room" />
    <meta name="twitter:description" content="This is the fourth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the application configuration." />
    <meta name="twitter:url" content="http://localhost:2368/the-service-room/" />
    <meta name="twitter:image" content="http://localhost:2368/content/images/2020/04/willys-jeep-dashboard-marco-oliveira.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Spyros Garyfallos" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Azure IoT Edge" />
    <meta name="twitter:site" content="@SpyrosCarnation" />
    <meta name="twitter:creator" content="@SpyrosCarnation" />
    <meta property="og:image:width" content="967" />
    <meta property="og:image:height" content="500" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "HAVE DATA - WILL TRAIN",
        "url": "http://localhost:2368/",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2019/07/Logo2.png"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Spyros Garyfallos",
        "image": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/content/images/2019/09/Capture.PNG",
            "width": 375,
            "height": 439
        },
        "url": "http://localhost:2368/author/spyros/",
        "sameAs": [
            "https://www.facebook.com/spyros.garyfallos",
            "https://twitter.com/SpyrosCarnation"
        ]
    },
    "headline": "The Service Room",
    "url": "http://localhost:2368/the-service-room/",
    "datePublished": "2020-04-10T18:38:20.000Z",
    "dateModified": "2020-04-14T17:57:40.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2020/04/willys-jeep-dashboard-marco-oliveira.jpg",
        "width": 967,
        "height": 500
    },
    "keywords": "Azure IoT Edge",
    "description": "This is the fourth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the application configuration.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.12" />
    <link rel="alternate" type="application/rss+xml" title="HAVE DATA - WILL TRAIN" href="http://localhost:2368/rss/" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-148729349-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148729349-1');
</script>

<!-- link tag -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css" />

</head>
<body class="post-template tag-azure-iot-edge">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="http://localhost:2368"><img src="/content/images/2019/07/Logo2.png" alt="HAVE DATA - WILL TRAIN" /></a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="http://localhost:2368/">Home</a></li>
    <li class="nav-author" role="menuitem"><a href="http://localhost:2368/author/spyros/">Author</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-fb" href="https://www.linkedin.com/in/spirosgarifallos/" title="Linkedin" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="26" height="26"
viewBox="0 0 192 192"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#ffffff"><g id="surface1"><path d="M156,0h-120c-19.875,0 -36,16.125 -36,36v120c0,19.875 16.125,36 36,36h120c19.875,0 36,-16.125 36,-36v-120c0,-19.875 -16.125,-36 -36,-36zM59.36539,162.98077h-29.82693l-0.17307,-89.30769h29.82692zM43.70192,61.99038h-0.17308c-9.75,0 -16.03846,-6.72115 -16.03846,-15.08653c0,-8.56731 6.49039,-15.0577 16.41347,-15.0577c9.92308,0 16.00961,6.49038 16.21153,15.0577c0,8.36538 -6.31731,15.08653 -16.41346,15.08653zM162.77885,162.98077h-30.08654v-48.51923c0,-11.74039 -3.11538,-19.73077 -13.61538,-19.73077c-8.01923,0 -12.34615,5.39423 -14.42308,10.61538c-0.77885,1.875 -0.98077,4.44231 -0.98077,7.06731v50.56731h-30.23077l-0.17308,-89.30769h30.23077l0.17308,12.60577c3.86538,-5.97116 10.29808,-14.42308 25.70192,-14.42308c19.09616,0 33.37501,12.46154 33.37501,39.25961v51.86539z"></path></g></g></g></svg></a>
                <a class="social-link social-link-tw" href="https://twitter.com/SpyrosCarnation" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/http://localhost:2368/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-azure-iot-edge ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2020-04-10">10 April 2020</time>
                        <span class="date-divider">/</span> <a href="/tag/azure-iot-edge/">Azure IoT Edge</a>
                </section>
                <h1 class="post-full-title">The Service Room</h1>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="/content/images/size/w300/2020/04/willys-jeep-dashboard-marco-oliveira.jpg 300w,
                            /content/images/size/w600/2020/04/willys-jeep-dashboard-marco-oliveira.jpg 600w,
                            /content/images/size/w1000/2020/04/willys-jeep-dashboard-marco-oliveira.jpg 1000w,
                            /content/images/size/w2000/2020/04/willys-jeep-dashboard-marco-oliveira.jpg 2000w"
                    sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px"
                    src="/content/images/size/w2000/2020/04/willys-jeep-dashboard-marco-oliveira.jpg"
                    alt="The Service Room"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>Reading <strong>configuration settings </strong>is one of the most fundamental tasks of any IoT Edge application. We will postulate a configuration categorization and explore how this categorization maps to .NET. Although these examples are specific to Azure IoT Edge applications, the best practices presented here are generic and apply to all other application types.  </p><h2 id="application-configuration">Application Configuration</h2><h3></h3><p>A well-designed application needs to be able to adjust its behavior based on the <strong>environment </strong>it is running in. And although the definition of the environment can become a matter of debate, there are some commonly accepted standard environments in Software Engineering: <strong>Development</strong>, <strong>Test</strong>, <strong>Staging</strong> and <strong>Production</strong>. Apparently, some variability exists to the cardinality of these environments, sometimes merging together some of them (eg. Test and Staging), and similarly, an environment can split into more specialized cases.</p><p>In reality, besides the environments related to the application lifecycle, an environment can be defined arbitrarily: can be based on geographical location, on physical characteristics, like ambient temperature or water pH, business parameters, like if an item has been sold or not, etc. This diversity of all possible environments makes the environment modeling difficult.  </p><p>To shed some light, we'll draw an example from real life, something that almost all people can relate to, <strong>cars. </strong></p><blockquote>Cars can be one of the best analogy examples one can find, mostly because cars are complex machines that most people have interacted with. Cars carry many well-designed features that many software engineers draw inspiration from when designing things.</blockquote><h3 id="environments">Environments</h3><p>Most modern ECUs (the main computer of a car) are designed to behave differently when in maintenance mode, when the service mechanic plugs in the diagnostic tool. This can be seen as analogous to a Debugging environment, where the TCU architects made sure that the TCU will emit diagnostic information to help the mechanic understand if there are any issues with the car. These environments are called <strong>lifecycle environments</strong>. </p><p>A second category of an environment is the <strong>operating environment, </strong>the environment in which a car is driven in. Many SUVs allow the drivers to choose between 4x4 and rear wheel drive based on the operating environment traction requirements. Similarly, the vehicle A/C can be turned on and off, according to the environment conditions. You can either define explicitly the environment, via a push button, or infer the environment by reading the sensors; for example infer that it's currently raining by reading the rain sensor. Many of these environment-based decisions have been automated today: the vehicle lights will turn on when it's dark, the A/C will kick-in when it's hot etc. Nevertheless, the point here is that the vehicle designers made the car <strong>real-time configurable </strong>to conform to the operating environment conditions.</p><blockquote><u>If seen from this standpoint, <strong>the application configuration is effectively information that defines an environment!</strong></u></blockquote><h3 id="device-twin">Device Twin</h3><p>The long intro and the emphasis to the application configuration definition is necessary, because having a clear understanding of what the configuration information is and what is not, affects the abstraction decisions we make that down the line become the difference between a well-designed and a poorly-designed application. </p><p>The notion of a <strong>device twin </strong>exists in the IoT space.<strong> </strong>Specifically, in Azure IoT Edge, the <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-device-twins">definition</a> of the device twin is: "<em><u>Device twins</u></em><u> are JSON documents that store device state information including metadata, </u><strong><u>configurations</u></strong><u>, and conditions</u>". The device twin is practically a collection of name-value properties that fall into the two self-explanatory categories, the <strong>desired </strong>and the <strong>reported </strong>properties.</p><p>Let's go back to the car example. Congrats! You just got hired by an automotive company to write the TCU software of their new <strong>connected vehicle car model</strong>. Would you store any lifecycle environment information in the device twin? How about the operating environment information, like for example, if it's is currently raining?</p><p>The lines can get easily blurred between the device state, the device configuration conditions and metadata.  Using the car analogy, we can draw a clear line to separate the configuration in two major categories:</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://localhost:2368/content/images/2020/04/Auto-mechanic-using-laptop_24096043_s-Custom.jpg" class="kg-image"><figcaption>System configuration</figcaption></figure><ul><li><strong>System (device) configuration</strong>, the configuration that the mechanic (administrator) can change, for example, set the engine idle RPM. The system configuration maps to the <strong>lifecycle environment definition. </strong>These environments are related to the lifecycle of the vehicle, are clearly defined and changing them usually requires an expert, tools and a vehicle restart.</li></ul><p></p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://localhost:2368/content/images/2020/04/image-22.png" class="kg-image"><figcaption>User configuration</figcaption></figure><ul><li><strong>User configuration</strong>, the configuration that the vehicle drivers (users) can change, for example, the steering wheel height or the radio station. This is easier to achieve through a user interface. The user configuration maps to the <strong>operation environment definition</strong>. This environment can change dynamically, no restart is required and the vehicle driver (user) has the power to define it.</li></ul><blockquote>Note: In IoT, there's always an administrator, and the devices that do not interact with users, don't have user configuration.</blockquote><p>By using these definitions, the rest of the story around configuration falls into place: </p><ol><li>The system configuration is kept into the system itself, and <strong>to change the system configuration, a restart is required, perhaps even a new deployment.</strong> The system configuration is enforced, the device either conforms, or fails to start. </li><li>On the other hand, the <strong>user configuration is persisted in the desired properties</strong> of the digital twin. These can change on the fly, and perhaps by external systems, and the device should try to do its best to honor these updates, although this configuration can be seen more like hints.</li><li>Finally, all the <strong>read-only sensory values are the reported properties</strong> of the device twin.</li></ol><blockquote>Food for thought: Where would you store the default values of the user configuration?</blockquote><p>Let's see now how all these look written in source code.</p><h3 id="reading-system-configuration">Reading System Configuration</h3><p>For system configuration we'll use the following  packages:</p><ul><li><code>Microsoft.Extensions.Configuration</code> </li><li><code>Microsoft.Extensions.Configuration.Abstractions</code></li><li><code>Microsoft.Extensions.Configuration.CommandLine</code></li><li><code>Microsoft.Extensions.Configuration.EnvironmentVariables</code></li><li><code>Microsoft.Extensions.Configuration.Json</code></li></ul><p>Using these packages we can write a simple application that reads the system information:</p><figure class="kg-card kg-code-card"><pre><code class="language-csharp">using System;
using System.Threading.Tasks;
using Microsoft.Extensions.Configuration;

namespace Example5
{
    class Program
    {
        // This is the program entry point
        static async Task Main(string[] args)
        {
            // Read the system configuration
            IConfiguration configuration;
            configuration = new ConfigurationBuilder()
                .AddJsonFile("appsettings.json", optional: true)
                .AddEnvironmentVariables()
                .AddCommandLine(args)
                .Build();

            if (configuration["Environment"] == "Debug")
            {
                Console.WriteLine($"Configuring for debugging environment..");
                // Code omitted
            }
            Console.WriteLine("Exiting..");
        }
    }
}</code></pre><figcaption>Reading the System Configuration using <code>Microsoft.Extensions.Configuration</code></figcaption></figure><p>The <code>IConfiguration</code> property will hold the configuration settings <strong>union</strong>, based on the order of composition we define. In this example, we start with an optional local JSON file <code>appsettings.json</code>, then we add the environment variables and the command line arguments. Each time we add a new configuration source, we override any variables with the same name.</p><blockquote>A good practice is to keep the hosting environment configuration last. This allows us change the configuration without redeploying a new file system version.</blockquote><p>Running this application with command line arguments makes easier to test our code:</p><figure class="kg-card kg-image-card"><img src="http://localhost:2368/content/images/2020/04/config.gif" class="kg-image"></figure><h3 id="writing-system-configuration">Writing System Configuration </h3><p>To set this configuration, you can either push an updated <code>appsettings.json</code> file through a new deployment, or set the <code>settings.createOptions.Env</code> section of a module in the deployment manifest:</p><pre><code class="language-json">          "module2": {
            ...
            "settings": {
              "createOptions": {
                "Env": [
                  "DB_SERVER_URL=${DB_SERVER_URL}"
                ]
              }
            }
          }</code></pre><h3 id="reading-user-configuration">Reading User Configuration</h3><p>To read the user configuration from the device twin, we can use this code snippet:</p><figure class="kg-card kg-code-card"><pre><code class="language-csharp">await ModuleClient.OpenAsync();
var twin = await ModuleClient.GetTwinAsync();
if (twin!= null &amp;&amp; twin.Properties.Desired.Contains("IntervalInSeconds"))
	int.TryParse(twin.Properties.Desired["IntervalInSeconds"], out IntervalInSeconds);</code></pre><figcaption>Reading user configuration from the device twin&nbsp;</figcaption></figure><h3 id="writing-user-configuration">Writing User Configuration  </h3><p>You have two options to update the user configuration: via <a href="https://docs.microsoft.com/en-us/azure/iot-edge/module-composition#define-or-update-desired-properties">deployment manifest </a>or by using the service-side IoT SDK.</p><p>The deployment manifest has the <code>properties.desired</code> section per module. Setting this section requires a redeployment and an application restart. You can think this section as the default values of the module twin.</p><pre><code class="language-json">        "module1": {
            "properties.desired": {
                // desired properties of module1
            }
        },</code></pre><p>Conversely, you can set the module twin using the Service (cloud) side of the Azure IoT SDK. A complete example can be found <a href="https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-csharp-csharp-module-twin-getstarted">here</a>.</p><p>To better understand the different categories and their corresponding location throughout the system, we can visualize everything in a single diagram:</p><figure class="kg-card kg-image-card"><img src="http://localhost:2368/content/images/2020/04/image-27.png" class="kg-image"></figure><h3 id="the-thermostat-example">The Thermostat Example</h3><p>Revisiting the original thermostat example we saw in the <a href="/the-waiting-loop/">previous post</a>, now the thermostat code looks like:</p><pre><code class="language-csharp">using System;
using System.Runtime.Loader;
using System.Threading;
using System.Threading.Tasks;
using Microsoft.Extensions.Configuration;

namespace Example6
{
    class Program
    {
        // This is the program entry point
        static async Task Main(string[] args)
        {
            // Read the system configuration
            IConfiguration configuration;
            configuration = new ConfigurationBuilder()
                .AddJsonFile("appsettings.json", optional: true)
                .AddEnvironmentVariables()
                .AddCommandLine(args)
                .Build();

            // Create the cancelation token source
            var cancellationTokenSource = new CancellationTokenSource();
            AssemblyLoadContext.Default.Unloading +=
                (cts) =&gt; cancellationTokenSource.Cancel();

            Console.CancelKeyPress +=
                (sender, cts) =&gt;
                {
                    Console.WriteLine("Ctrl+C detected.");
                    cts.Cancel = true;
                    cancellationTokenSource.Cancel();
                };

            // Register the Reset command callback 
            await RegisterCommandCallbackAsync("Reset",
                OnReset,
                cancellationTokenSource.Token);

            // Read the system configuration or default to 1
            int interval;
            if (!int.TryParse(
                configuration["IntervalInSeconds"],
                out interval))
                interval = 1;

            // Create and start the TaskTimer
            TaskTimer taskTimer = new TaskTimer(
                EmitTelemetryMessage,
                TimeSpan.FromSeconds(interval), 
                cancellationTokenSource);

            // A non-blocking call to start the task-timer
            taskTimer.Start();

            // Wait until the app unloads or gets cancelled
            await WhenCancelled(cancellationTokenSource.Token);

            // Let the other threads drain
            Console.WriteLine("Waiting for 2 seconds..");
            await Task.Delay(2 * 1000);

            Console.WriteLine("Exiting..");
        }

        public static Task WhenCancelled(CancellationToken cancellationToken)
        {
            var taskCompletionSource = new TaskCompletionSource&lt;bool&gt;();
            cancellationToken.Register(
                s =&gt; ((TaskCompletionSource&lt;bool&gt;)s).SetResult(true),
                taskCompletionSource);
            return taskCompletionSource.Task;
        }
        private static async Task RegisterCommandCallbackAsync(string command,
            Action callback,
            CancellationToken cancellationToken)
        {
            // Perform the command registration
            // Code omitted
            return;
        }

        // A method exposed for RPC
        static void OnReset()
        {
            // Perform a temperature sensor reset
            // Code omitted
        }

        // Emit telemetry message
        static void EmitTelemetryMessage()
        {
            Console.WriteLine($"Sending telemetry message..");
        }
    }
}
</code></pre><blockquote>So far in this mini-series we have deliberately avoided using the Azure IoT SDK, the idea being, we want to build a <strong>hosting environment agnostic </strong>application, were the code is not coupled to a specific hosting technology. With this approach, hosting it on the Edge becomes a choice, and helps us to develop most of the code in our preferred development environment.</blockquote><p>As alluded to this post, one of the most popular cases for reconfiguring the IoT application is for debugging purposes. In the next post we will explore the best practices on application logging.</p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="/content/images/size/w100/2019/09/Capture.PNG" alt="Spyros Garyfallos" />
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="/author/spyros/">Spyros Garyfallos</a></h4>
            <p>Read <a href="/author/spyros/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="/author/spyros/">Read More</a>
</div>


            </footer>

            
            <section class="post-full-comments">
                <div id="disqus_thread"></div>
                <script>
                    var disqus_config = function () {
                        this.page.url = "http://localhost:2368/the-service-room/";  
                        this.page.identifier = "ghost-5e8ba7eaca768b2661b5c8d7"
                    };
                    (function() {
                    var d = document, s = d.createElement('script');
                    s.src = 'https://have-data-will-train.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                </script>
            </section>
            

        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"
                            style="background-image: url(/content/images/size/w600/2019/07/blog-cover2.jpg)"
                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; HAVE DATA - WILL TRAIN &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/azure-iot-edge/">Azure IoT Edge</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/the-log-hunt/">The Log Hunt</a></li>
                            <li><a href="/the-waiting-loop/">The Waiting Loop</a></li>
                            <li><a href="/restarted-by-request/">Restarted by request</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/azure-iot-edge/">See all 4 posts →</a>
                    </footer>
                </article>

                <article class="post-card post tag-azure-iot-edge ">

    <a class="post-card-image-link" href="/the-log-hunt/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2020/04/linearB-1.jpg 300w,
                    /content/images/size/w600/2020/04/linearB-1.jpg 600w,
                    /content/images/size/w1000/2020/04/linearB-1.jpg 1000w,
                    /content/images/size/w2000/2020/04/linearB-1.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2020/04/linearB-1.jpg"
            alt="The Log Hunt"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/the-log-hunt/">

            <header class="post-card-header">
                    <span class="post-card-tags">Azure IoT Edge</span>
                <h2 class="post-card-title">The Log Hunt</h2>
            </header>

            <section class="post-card-excerpt">
                <p>This is the fifth post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the application logging.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Spyros Garyfallos
                    </div>

                        <a href="/author/spyros/" class="static-avatar">
                            <img class="author-profile-image" src="/content/images/size/w100/2019/09/Capture.PNG" alt="Spyros Garyfallos" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">5 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post tag-azure-iot-edge ">

    <a class="post-card-image-link" href="/the-waiting-loop/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2020/04/penguins-1.jpg 300w,
                    /content/images/size/w600/2020/04/penguins-1.jpg 600w,
                    /content/images/size/w1000/2020/04/penguins-1.jpg 1000w,
                    /content/images/size/w2000/2020/04/penguins-1.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2020/04/penguins-1.jpg"
            alt="The Waiting Loop"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/the-waiting-loop/">

            <header class="post-card-header">
                    <span class="post-card-tags">Azure IoT Edge</span>
                <h2 class="post-card-title">The Waiting Loop</h2>
            </header>

            <section class="post-card-excerpt">
                <p>This is the third post of a mini-series that aims to address the development experience and production readiness challenges in the space of IoT Edge, primarily under the lens of Azure IoT Edge. This post deals with the topic of the telemetry pump.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Spyros Garyfallos
                    </div>

                        <a href="/author/spyros/" class="static-avatar">
                            <img class="author-profile-image" src="/content/images/size/w100/2019/09/Capture.PNG" alt="Spyros Garyfallos" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">6 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:2368">
                <img src="/content/images/size/w30/2019/07/icon.png" alt="HAVE DATA - WILL TRAIN icon" />
            <span>HAVE DATA - WILL TRAIN</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">The Service Room</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=The%20Service%20Room&amp;url=http://localhost:2368/the-service-room/"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/the-service-room/"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
        </a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:2368">HAVE DATA - WILL TRAIN</a> &copy; 2020</section>
                <nav class="site-footer-nav">
                    <a href="http://localhost:2368">Latest Posts</a>
                    <a href="https://www.linkedin.com/in/spirosgarifallos/" target="_blank" rel="noopener">LinkedIn</a>
                    <a href="https://twitter.com/SpyrosCarnation" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/built/jquery.fitvids.js?v=9e8ba95cb2"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    <!-- script tag -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-csharp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-python.min.js"></script>

</body>
</html>
